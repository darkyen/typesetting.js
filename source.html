<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>typesetting.js - Web Typography Library by Robert Lemon</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="typesetting.js - Web Typography Library by Robert Lemon">
<meta name="author" content="Robert Lemon">
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/site.css" rel="stylesheet">
<link href="google-code-prettify/prettify.css" rel="stylesheet">
<!--[if lt IE 9]>
	<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<style>

.hero-unit {
	padding-bottom: 1em;
}
.pad-top {
	padding-top: 1em;
}
.jump-links {
	margin-top: -0.4em;
	color: #999;
}

.modwell {
	margin-bottom: 1.3em;
}

h2 a, h2 a:hover {
	color: inherit;
	text-decoration: inherit;
}

.modtitle {
	position: relative;
}

.modtitle img {
	margin: -1em 0 0 1em;
}

.modtitle.alt:before {
	width: 2em;
	font-weight: normal;
	color: #999;
	font-size: 26px;
	margin-left: -2em;
	content: 'use ';
}

</style>

</head>
<body onload="prettyPrint()">
<div class="navbar navbar-top">
	<div class="navbar-inner">
		<div class="container">
			<a class="brand" href="index.html">typesetting.js</a>
			<ul class="nav">
				<li ><a href="index.html">Home</a></li>
				<li ><a href="demos.html">Demos</a></li>
				<li ><a href="usage.html">Usage</a></li>
				<li class="active" ><a href="source.html">Source</a></li>
			</ul>
		</div>
	</div>
</div>

<div class="container">

	<header class="hero-unit">
		<h1 class="modtitle alt">The Source <small>Luke...</small><img src="img/yoda.png" height="48" width="48" /></h1>
		<p class="pad-top">Minified versions can be <em>Forked</em> from the GitHub repository or by clicking the <em>Download</em> button below.</p>
		<hr />
		<p style="text-align: center;">
			<a href="https://github.com/rlemon/typesetting.js/" class="btn btn-primary btn-large">View source on GitHub</a> 
			<a class="btn btn-large" disabled="disabled">Download TypeSetting.js</a>
		</p>
	</header>

	<div class="row modwell">
		<div class="span11 modhero">
			<h2>typesetting.js <small>version 1.1</small></h2>
			<p style="text-align: right;">
				<a href="https://raw.github.com/rlemon/typesetting.js/master/typesetting.js">Raw</a> |
				<a href="https://github.com/rlemon/typesetting.js/blob/1.1/typesetting.js">Master</a>
			</p>
<pre class="prettyprint lang-js">
var typesetting = (function() {

    function injector(t, splitter, klass, after, runner, reset) {
        var a = (t.innerText || t.textContent),
            inject = '',
            runner = runner || false, 
            reset = reset || false,
            i = 1,
            run_up = true;
        a = a.split(splitter);
        if (a.length) {
            a.forEach(function(item) {
                inject += '<span class="' + klass + i + '">' + item + '</span>' + after;
                if( !!runner && !reset ) {
                    if( run_up && i < runner ) {
                        i++;
                    } else if( run_up && i >= runner ) {
                        run_up = false;
                        i--;
                    } else if( !run_up && i > 1 ) {
                        i--;
                    } else {
                        run_up = true;
                        i++;
                    }
                } else if( !!reset && !runner ) {
                    i = i < reset ? i+1 : 1;
                } else if( !reset && !runner ) {
                    i++;
                } else {
                    throw('Error: Cannot set property runner and reset');
                    return;
                }
            });
            t.innerHTML = inject; 
        }
    }

    function replaceNodeWith(element, search, replace) {
        var elements = element.childNodes;
        for (var i = 0, l = elements.length; i < l; i++) {
            if (elements[i].tagName === search) {
                element.replaceChild(document.createTextNode(replace), elements[i]);
            }
        }
    }

    function collectElements(queryString, context) { // setup for later on
        context = context || document;
        return Sizzle(queryString, context);
    }

    var typesetting = {
        letters: function(queryString, options) {
            options = options || {};
            var elements = collectElements(queryString);
            elements.forEach(function(item) {
                injector(
                    item, 
                    '', 
                    (options.baseClass || 'char'), 
                    (options.after || ''), 
                    (options.runner || false), 
                    (options.reset || false)
                );
            });
            return elements;
        },
        lines: function(queryString, options) {
            options = options || {};
            var elements = collectElements(queryString);
            elements.forEach(function(item) {
                var r = "eefec303079ad17405c889e092e105b0";
                replaceNodeWith(item, 'BR', r);
                injector(
                    item, 
                    r, 
                    (options.baseClass || 'line'), 
                    (options.after || ''), 
                    (options.runner || false), 
                    (options.reset || false)
                );
            });
            return elements;
        },
        words: function(queryString, options) {
            options = options || {};
            var elements = collectElements(queryString);
            elements.forEach(function(item) {
                injector(
                    item, 
                    ' ', 
                    (options.baseClass || 'line'), 
                    (options.after || ''), 
                    (options.runner || false), 
                    (options.reset || false)
                );
            });
            return elements;
        }
    };
    
    return typesetting;
    
})();
</pre>

		</div>
	</div>


	<footer>
		<p class="pull-left">&copy; rlemon.com 2012</p>
		<p class="pull-right">Keep upto date <a href="http://blog.rlemon.com">blog</a> / <a href="http://twitter.com/thegreatrupert">twitter</a> / <a href="http://github.com/rlemon">github</a> </p>
	</footer>

</div> 

<script src="js/Sizzle.js"></script>
<script src="js/typesetting.js"></script>

<script>
// typesetting transform logo
typesetting.letters('#logo');
</script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29836157-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script src="google-code-prettify/prettify.js"></script>
</body>
</html>
